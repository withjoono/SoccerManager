<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶œì„ ì²´í¬ - ë“œë˜ê·¸ ì•¤ ë“œë¡­</title>
    <script src="gesture-handler.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        .phone {
            width: 100%;
            max-width: 400px;
            background: #000;
            border-radius: 40px;
            padding: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        }
        
        .screen {
            background: #F3F4F6;
            border-radius: 32px;
            overflow: hidden;
            height: 850px;
            display: flex;
            flex-direction: column;
        }
        
        /* ìƒë‹¨ í—¤ë” */
        .header {
            background: white;
            border-bottom: 1px solid #E5E7EB;
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-around;
            padding: 16px 20px;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .stat-text {
            font-size: 24px;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 12px;
            color: #6B7280;
            margin-left: 4px;
        }
        
        .instruction {
            text-align: center;
            font-size: 11px;
            color: #6B7280;
            padding: 8px 16px;
            border-top: 1px solid #F3F4F6;
        }
        
        /* ë“œë¡­ì¡´ */
        .drop-zone {
            padding: 16px;
            min-height: 120px;
            border: 2px dashed transparent;
        }
        
        .present-zone {
            background: #10B981;
            border-bottom: 2px solid #059669;
        }
        
        .absent-zone {
            background: #EF4444;
            border-top: 2px solid #DC2626;
        }
        
        .drop-zone.drag-over {
            border-color: white;
            background: rgba(255, 255, 255, 0.2);
        }
        
        .zone-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: white;
            margin-bottom: 12px;
        }
        
        .zone-title {
            font-size: 16px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .zone-count {
            font-size: 20px;
            font-weight: bold;
        }
        
        .zone-members {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            min-height: 40px;
        }
        
        .zone-empty {
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
            text-align: center;
            width: 100%;
            padding: 10px;
        }
        
        /* ìŠ¤í¬ë¡¤ ì˜ì—­ */
        .scroll-container {
            flex: 1;
            background: #F3F4F6;
            position: relative;
        }
        
        .scroll-label {
            text-align: center;
            padding: 12px;
            background: white;
            border-bottom: 1px solid #E5E7EB;
            font-size: 14px;
            font-weight: 600;
            color: #6B7280;
        }
        
        .scroll-area {
            width: 100%;
            height: calc(100% - 50px);
            overflow-x: scroll;
            overflow-y: hidden;
            padding: 20px;
            cursor: grab;
            user-select: none;
        }
        
        .scroll-area:active {
            cursor: grabbing;
        }
        
        .scroll-content {
            display: inline-flex;
            gap: 16px;
            align-items: center;
            min-width: max-content;
            padding-right: 20px;
        }
        
        /* íšŒì› ë™ê·¸ë¼ë¯¸ */
        .member-circle {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            cursor: grab;
            user-select: none;
            flex-shrink: 0;
        }
        
        .member-circle:active {
            cursor: grabbing;
        }
        
        .member-circle.dragging {
            opacity: 0.3;
        }
        
        .circle {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            border: 3px solid #9CA3AF;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease;
        }
        
        .member-circle:hover .circle {
            transform: scale(1.1);
        }
        
        .circle.present {
            border-color: #10B981;
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
        }
        
        .circle.absent {
            border-color: #EF4444;
            background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
        }
        
        .circle.pending {
            border-color: #9CA3AF;
            background: linear-gradient(135deg, #9CA3AF 0%, #6B7280 100%);
        }
        
        .member-text {
            font-size: 13px;
            font-weight: bold;
            color: white;
            text-align: center;
            line-height: 1.2;
            padding: 4px;
        }
        
        /* ì‘ì€ ë™ê·¸ë¼ë¯¸ (ë“œë¡­ì¡´ìš©) */
        .member-circle-small {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
        }
        
        .circle-small {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            border: 2px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        }
        
        .circle-small .member-text {
            font-size: 10px;
            color: #1F2937;
        }
        
        /* í•˜ë‹¨ ì•¡ì…˜ */
        .footer {
            background: white;
            border-top: 1px solid #E5E7EB;
        }
        
        .quick-actions {
            display: flex;
            justify-content: space-around;
            padding: 12px 16px;
        }
        
        .quick-button {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 20px;
            color: white;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .quick-button:hover {
            transform: scale(1.05);
        }
        
        .quick-button.all-present { background: #10B981; }
        .quick-button.reset { background: #9CA3AF; }
        .quick-button.save { background: #1E3A8A; }
        
        /* í•˜ë‹¨ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
        .bottom-nav {
            display: flex;
            justify-content: space-around;
            background: white;
            border-top: 1px solid #E5E7EB;
            padding: 8px 0 12px;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            flex: 1;
        }
        
        .nav-icon {
            font-size: 20px;
            opacity: 0.5;
        }
        
        .nav-label {
            font-size: 10px;
            color: #9CA3AF;
            font-weight: 600;
        }
        
        .nav-item.active .nav-icon {
            opacity: 1;
        }
        
        .nav-item.active .nav-label {
            color: #1E3A8A;
        }
        
        /* ìŠ¤í¬ë¡¤ë°” */
        .scroll-area::-webkit-scrollbar { height: 8px; }
        .scroll-area::-webkit-scrollbar-track { background: #E5E7EB; border-radius: 4px; }
        .scroll-area::-webkit-scrollbar-thumb { background: #9CA3AF; border-radius: 4px; }
        .scroll-area::-webkit-scrollbar-thumb:hover { background: #6B7280; }
    </style>
</head>
<body>
    <div class="phone">
        <div class="screen">
            <!-- ìƒë‹¨ í—¤ë” -->
            <div class="header">
                <div class="stats-bar">
                    <div class="stat-item">
                        <span style="color: #10B981; font-size: 24px;">âœ“</span>
                        <span class="stat-text" style="color: #10B981;" id="presentCount">0</span>
                        <span class="stat-label">ì¶œì„</span>
                    </div>
                    <div class="stat-item">
                        <span style="color: #EF4444; font-size: 24px;">âœ•</span>
                        <span class="stat-text" style="color: #EF4444;" id="absentCount">0</span>
                        <span class="stat-label">ê²°ì„</span>
                    </div>
                    <div class="stat-item">
                        <span style="color: #9CA3AF; font-size: 24px;">?</span>
                        <span class="stat-text" style="color: #9CA3AF;" id="pendingCount">18</span>
                        <span class="stat-label">ëŒ€ê¸°</span>
                    </div>
                </div>
                <div class="instruction">
                    â¬…ï¸ ì¢Œìš° ìŠ¤í¬ë¡¤ | â¬†ï¸â¬‡ï¸ íšŒì›ì„ ë“œë˜ê·¸í•˜ì—¬ ì¶œì„/ê²°ì„ ì²´í¬
                </div>
            </div>
            
            <!-- ì¶œì„ ì˜ì—­ -->
            <div class="drop-zone present-zone" id="presentZone">
                <div class="zone-header">
                    <div class="zone-title">
                        <span>â¬‡ï¸ ì¶œì„</span>
                    </div>
                    <div class="zone-count" id="presentCountBig">0ëª…</div>
                </div>
                <div class="zone-members" id="presentMembers">
                    <div class="zone-empty">íšŒì›ì„ ì—¬ê¸°ë¡œ ë“œë˜ê·¸í•˜ì„¸ìš”</div>
                </div>
            </div>
            
            <!-- ëŒ€ê¸° íšŒì› ìŠ¤í¬ë¡¤ ì˜ì—­ -->
            <div class="scroll-container">
                <div class="scroll-label">ëŒ€ê¸° ì¤‘ì¸ íšŒì› (ì¢Œìš° ìŠ¤í¬ë¡¤)</div>
                <div class="scroll-area" id="scrollArea">
                    <div class="scroll-content" id="pendingMembers">
                        <!-- íšŒì›ë“¤ì´ ì—¬ê¸° ìƒì„±ë¨ -->
                    </div>
                </div>
            </div>
            
            <!-- ê²°ì„ ì˜ì—­ -->
            <div class="drop-zone absent-zone" id="absentZone">
                <div class="zone-header">
                    <div class="zone-title">
                        <span>â¬†ï¸ ê²°ì„</span>
                    </div>
                    <div class="zone-count" id="absentCountBig">0ëª…</div>
                </div>
                <div class="zone-members" id="absentMembers">
                    <div class="zone-empty">íšŒì›ì„ ì—¬ê¸°ë¡œ ë“œë˜ê·¸í•˜ì„¸ìš”</div>
                </div>
            </div>
            
            <!-- í•˜ë‹¨ ì•¡ì…˜ -->
            <div class="footer">
                <div class="quick-actions">
                    <div class="quick-button all-present" id="btnAllPresent">âœ“ ì „ì²´ ì¶œì„</div>
                    <div class="quick-button reset" id="btnReset">â†» ì´ˆê¸°í™”</div>
                    <div class="quick-button save" id="btnSave">â¡ï¸ ì™„ë£Œ</div>
                </div>
            </div>
            
            <!-- í•˜ë‹¨ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
            <div class="bottom-nav">
                <div class="nav-item">
                    <div class="nav-icon">ğŸ </div>
                    <div class="nav-label">í™ˆ</div>
                </div>
                <div class="nav-item active">
                    <div class="nav-icon">âœ“</div>
                    <div class="nav-label">ì¶œì„ì²´í¬</div>
                </div>
                <div class="nav-item">
                    <div class="nav-icon">ğŸ‘¥</div>
                    <div class="nav-label">íŒ€êµ¬ì„±</div>
                </div>
                <div class="nav-item">
                    <div class="nav-icon">ğŸ†</div>
                    <div class="nav-label">ê²½ê¸°ê²°ê³¼</div>
                </div>
                <div class="nav-item">
                    <div class="nav-icon">ğŸ“Š</div>
                    <div class="nav-label">í†µê³„ìˆœìœ„</div>
                </div>
                <div class="nav-item">
                    <div class="nav-icon">ğŸ‘¤</div>
                    <div class="nav-label">íšŒì›ê´€ë¦¬</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // íšŒì› ë°ì´í„°
        const members = [
            { id: 1, name: 'ê°•ë¯¼ìˆ˜', status: 'pending' },
            { id: 2, name: 'ê³ ì€ì•„', status: 'pending' },
            { id: 3, name: 'ê¹€ì² ìˆ˜', status: 'pending' },
            { id: 4, name: 'ë‚¨ê¶ë¯¼', status: 'pending' },
            { id: 5, name: 'ë¬¸ì§€í˜¸', status: 'pending' },
            { id: 6, name: 'ë°•ì˜í¬', status: 'pending' },
            { id: 7, name: 'ë°°ì„±í˜¸', status: 'pending' },
            { id: 8, name: 'ì„œì—°ìš°', status: 'pending' },
            { id: 9, name: 'ì•ˆì£¼ì˜', status: 'pending' },
            { id: 10, name: 'ì˜¤íƒœì„', status: 'pending' },
            { id: 11, name: 'ìœ ì§€ë¯¼', status: 'pending' },
            { id: 12, name: 'ìœ¤í•˜ëŠ˜', status: 'pending' },
            { id: 13, name: 'ì´ë¯¼ì¤€', status: 'pending' },
            { id: 14, name: 'ì •ìˆ˜ì•„', status: 'pending' },
            { id: 15, name: 'ìµœì¤€í˜¸', status: 'pending' },
            { id: 16, name: 'í•œì„œì§„', status: 'pending' },
            { id: 17, name: 'í™ê¸¸ë™', status: 'pending' },
            { id: 18, name: 'í™©ì§€ìš°', status: 'pending' },
        ];

        let draggedElement = null;
        let draggedMemberId = null;

        // íšŒì› ë™ê·¸ë¼ë¯¸ HTML ìƒì„±
        function createBall(member, size = 'normal') {
            const displayName = member.name;
            const containerClass = size === 'small' ? 'member-circle-small' : 'member-circle';
            const circleClass = size === 'small' ? 'circle-small' : 'circle';
            
            return `
                <div class="${containerClass}" draggable="true" data-member-id="${member.id}">
                    <div class="${circleClass} ${member.status}">
                        <div class="member-text">${displayName}</div>
                    </div>
                </div>
            `;
        }

        // í™”ë©´ ë Œë”ë§
        function render() {
            const pendingMembers = members.filter(m => m.status === 'pending');
            const presentMembers = members.filter(m => m.status === 'present');
            const absentMembers = members.filter(m => m.status === 'absent');

            // ëŒ€ê¸° ì˜ì—­
            const pendingContainer = document.getElementById('pendingMembers');
            pendingContainer.innerHTML = pendingMembers.map(m => createBall(m)).join('');

            // ì¶œì„ ì˜ì—­
            const presentContainer = document.getElementById('presentMembers');
            if (presentMembers.length === 0) {
                presentContainer.innerHTML = '<div class="zone-empty">íšŒì›ì„ ì—¬ê¸°ë¡œ ë“œë˜ê·¸í•˜ì„¸ìš”</div>';
            } else {
                presentContainer.innerHTML = presentMembers.map(m => createBall(m, 'small')).join('');
            }

            // ê²°ì„ ì˜ì—­
            const absentContainer = document.getElementById('absentMembers');
            if (absentMembers.length === 0) {
                absentContainer.innerHTML = '<div class="zone-empty">íšŒì›ì„ ì—¬ê¸°ë¡œ ë“œë˜ê·¸í•˜ì„¸ìš”</div>';
            } else {
                absentContainer.innerHTML = absentMembers.map(m => createBall(m, 'small')).join('');
            }

            // ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
            document.getElementById('presentCount').textContent = presentMembers.length;
            document.getElementById('absentCount').textContent = absentMembers.length;
            document.getElementById('pendingCount').textContent = pendingMembers.length;
            document.getElementById('presentCountBig').textContent = presentMembers.length + 'ëª…';
            document.getElementById('absentCountBig').textContent = absentMembers.length + 'ëª…';

            // ë“œë˜ê·¸ ì´ë²¤íŠ¸ ë“±ë¡
            attachDragEvents();
        }

        // ë“œë˜ê·¸ ì´ë²¤íŠ¸
        function attachDragEvents() {
            document.querySelectorAll('[draggable="true"]').forEach(ball => {
                ball.addEventListener('dragstart', (e) => {
                    draggedElement = ball;
                    draggedMemberId = parseInt(ball.dataset.memberId);
                    ball.classList.add('dragging');
                    e.dataTransfer.effectAllowed = 'move';
                });

                ball.addEventListener('dragend', () => {
                    ball.classList.remove('dragging');
                    draggedElement = null;
                });
            });

            // ë“œë¡­ì¡´ ì´ë²¤íŠ¸
            ['presentZone', 'absentZone', 'scrollArea'].forEach(zoneId => {
                const zone = document.getElementById(zoneId);
                
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('drag-over');
                });

                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('drag-over');
                });

                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('drag-over');
                    
                    if (!draggedMemberId) return;

                    const member = members.find(m => m.id === draggedMemberId);
                    if (!member) return;

                    if (zoneId === 'presentZone') {
                        member.status = 'present';
                    } else if (zoneId === 'absentZone') {
                        member.status = 'absent';
                    } else {
                        member.status = 'pending';
                    }

                    render();
                });
            });
        }

        // ë¹ ë¥¸ ë²„íŠ¼
        document.getElementById('btnAllPresent').addEventListener('click', () => {
            members.forEach(m => m.status = 'present');
            render();
            alert('âœ… ì „ì²´ ì¶œì„ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        });

        document.getElementById('btnReset').addEventListener('click', () => {
            members.forEach(m => m.status = 'pending');
            render();
            alert('â†©ï¸ ì „ì²´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
        });

        document.getElementById('btnSave').addEventListener('click', () => {
            const present = members.filter(m => m.status === 'present').length;
            const absent = members.filter(m => m.status === 'absent').length;
            alert('ğŸ’¾ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nì¶œì„: ' + present + 'ëª…\nê²°ì„: ' + absent + 'ëª…');
        });

        // ì´ˆê¸° ë Œë”ë§
        render();
    </script>
</body>
</html>
