<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŒ€ êµ¬ì„±</title>
    <script src="gesture-handler.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        .phone {
            width: 100%;
            max-width: 400px;
            background: #000;
            border-radius: 40px;
            padding: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        }
        
        .screen {
            background: #F3F4F6;
            border-radius: 32px;
            overflow: hidden;
            height: 850px;
            display: flex;
            flex-direction: column;
        }
        
        /* í—¤ë” */
        .header {
            background: white;
            padding: 16px 20px;
            border-bottom: 1px solid #E5E7EB;
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .header-title {
            font-size: 20px;
            font-weight: bold;
            color: #1F2937;
        }
        
        .header-buttons {
            display: flex;
            gap: 12px;
        }
        
        .reset-btn {
            display: flex;
            align-items: center;
            gap: 4px;
            color: #EF4444;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }
        
        .add-team-btn {
            display: flex;
            align-items: center;
            gap: 4px;
            color: #1E3A8A;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
        }
        
        .instruction {
            font-size: 12px;
            color: #6B7280;
        }
        
        /* ëŒ€ê¸° ì˜ì—­ */
        .waiting-area {
            background: white;
            padding: 12px 0;
            border-bottom: 1px solid #E5E7EB;
        }
        
        .waiting-header {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 0 20px;
            margin-bottom: 12px;
            font-size: 14px;
            font-weight: 600;
            color: #6B7280;
        }
        
        .waiting-scroll {
            display: flex;
            gap: 12px;
            padding: 0 20px;
            overflow-x: auto;
            white-space: nowrap;
        }
        
        /* íšŒì› ë™ê·¸ë¼ë¯¸ */
        .member-circle {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            cursor: grab;
            user-select: none;
        }
        
        .circle {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #9CA3AF 0%, #6B7280 100%);
            border-radius: 50%;
            border: 3px solid #9CA3AF;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .circle-text {
            font-size: 13px;
            font-weight: bold;
            color: white;
            text-align: center;
        }
        
        /* íŒ€ ì˜ì—­ */
        .teams-container {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }
        
        .team-card {
            background: white;
            border-radius: 12px;
            margin-bottom: 16px;
            border-left: 4px solid;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .team-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            color: white;
            font-weight: bold;
        }
        
        .team-name { font-size: 18px; }
        .team-count { font-size: 16px; }
        
        .team-members {
            padding: 12px;
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            min-height: 100px;
        }
        
        .team-member {
            position: relative;
        }
        
        .remove-btn {
            position: absolute;
            top: -5px;
            right: -5px;
            background: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #EF4444;
        }
        
        .empty-team {
            font-size: 12px;
            color: #9CA3AF;
            font-style: italic;
            align-self: center;
            margin-top: 20px;
        }
        
        .quick-assign {
            width: 100%;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
            border-top: 1px solid #F3F4F6;
            padding-top: 12px;
        }
        
        .quick-btn {
            background: #F3F4F6;
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 11px;
            color: #6B7280;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* í•˜ë‹¨ ë²„íŠ¼ */
        .footer {
            display: flex;
            padding: 16px;
            background: white;
            border-top: 1px solid #E5E7EB;
            gap: 12px;
        }
        
        .btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 14px;
            border-radius: 8px;
            gap: 8px;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
        
        .btn-random { background: #10B981; }
        .btn-save { background: #1E3A8A; }
        
        /* í•˜ë‹¨ íƒ­ */
        .bottom-nav {
            display: flex;
            justify-content: space-around;
            background: white;
            border-top: 1px solid #E5E7EB;
            padding: 8px 0 12px;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            flex: 1;
        }
        
        .nav-icon { font-size: 20px; opacity: 0.5; }
        .nav-label { font-size: 10px; color: #9CA3AF; font-weight: 600; }
        .nav-item.active .nav-icon { opacity: 1; }
        .nav-item.active .nav-label { color: #1E3A8A; }
    </style>
</head>
<body>
    <div class="phone">
        <div class="screen">
            <!-- í—¤ë” -->
            <div class="header">
                <div class="header-top">
                    <div class="header-title">íŒ€ êµ¬ì„±</div>
                    <div class="header-buttons">
                        <div class="reset-btn" onclick="resetTeams()">
                            <span>ğŸ”„</span>
                            <span>ì´ˆê¸°í™”</span>
                        </div>
                        <div class="add-team-btn" onclick="addTeam()">
                            <span>â•</span>
                            <span>íŒ€ ì¶”ê°€</span>
                        </div>
                    </div>
                </div>
                <div class="instruction">íšŒì›ì„ ë“œë˜ê·¸í•˜ì—¬ íŒ€ì— ë°°ì¹˜í•˜ì„¸ìš”</div>
            </div>
            
            <!-- ëŒ€ê¸° ì˜ì—­ -->
            <div class="waiting-area">
                <div class="waiting-header">
                    â³ ëŒ€ê¸° ì¤‘ (<span id="waitingCount">5</span>ëª…)
                </div>
                <div class="waiting-scroll" id="waitingMembers">
                    <div class="member-circle" draggable="true" data-id="1" data-name="ê°•ë¯¼ìˆ˜">
                        <div class="circle"><div class="circle-text">ê°•ë¯¼ìˆ˜</div></div>
                    </div>
                    <div class="member-circle" draggable="true" data-id="2" data-name="ê¹€ì² ìˆ˜">
                        <div class="circle"><div class="circle-text">ê¹€ì² ìˆ˜</div></div>
                    </div>
                    <div class="member-circle" draggable="true" data-id="3" data-name="ë°•ì˜í¬">
                        <div class="circle"><div class="circle-text">ë°•ì˜í¬</div></div>
                    </div>
                    <div class="member-circle" draggable="true" data-id="4" data-name="ì´ë¯¼ì¤€">
                        <div class="circle"><div class="circle-text">ì´ë¯¼ì¤€</div></div>
                    </div>
                    <div class="member-circle" draggable="true" data-id="5" data-name="ì •ìˆ˜ì•„">
                        <div class="circle"><div class="circle-text">ì •ìˆ˜ì•„</div></div>
                    </div>
                </div>
            </div>
            
            <!-- íŒ€ ì˜ì—­ -->
            <div class="teams-container" id="teamsContainer">
                <div class="team-card" style="border-left-color: #3B82F6;" data-team="teamA">
                    <div class="team-header" style="background: #3B82F6;">
                        <div class="team-name">AíŒ€</div>
                        <div class="team-count"><span class="team-member-count">0</span>ëª…</div>
                    </div>
                    <div class="team-members" data-team-members="teamA">
                        <div class="empty-team">íšŒì›ì„ ë“œë˜ê·¸í•˜ì—¬ ë°°ì¹˜í•˜ì„¸ìš”</div>
                    </div>
                </div>
                
                <div class="team-card" style="border-left-color: #EF4444;" data-team="teamB">
                    <div class="team-header" style="background: #EF4444;">
                        <div class="team-name">BíŒ€</div>
                        <div class="team-count"><span class="team-member-count">0</span>ëª…</div>
                    </div>
                    <div class="team-members" data-team-members="teamB">
                        <div class="empty-team">íšŒì›ì„ ë“œë˜ê·¸í•˜ì—¬ ë°°ì¹˜í•˜ì„¸ìš”</div>
                    </div>
                </div>
            </div>
            
            <!-- í•˜ë‹¨ ë²„íŠ¼ -->
            <div class="footer">
                <div class="btn btn-random" onclick="randomAssign()">
                    ğŸ”€ ëœë¤ ë°°ì •
                </div>
                <div class="btn btn-save" onclick="goToMatchResult()">
                    ê²°ê³¼ ê¸°ë¡
                    <span style="font-size: 24px; margin-left: 4px;">â†’</span>
                </div>
            </div>
            
            <!-- í•˜ë‹¨ íƒ­ -->
            <div class="bottom-nav">
                <div class="nav-item"><div class="nav-icon">ğŸ </div><div class="nav-label">í™ˆ</div></div>
                <div class="nav-item"><div class="nav-icon">âœ“</div><div class="nav-label">ì¶œì„ì²´í¬</div></div>
                <div class="nav-item active"><div class="nav-icon">ğŸ‘¥</div><div class="nav-label">íŒ€êµ¬ì„±</div></div>
                <div class="nav-item"><div class="nav-icon">ğŸ†</div><div class="nav-label">ê²½ê¸°ê²°ê³¼</div></div>
                <div class="nav-item"><div class="nav-icon">ğŸ“Š</div><div class="nav-label">í†µê³„ìˆœìœ„</div></div>
                <div class="nav-item"><div class="nav-icon">ğŸ‘¤</div><div class="nav-label">íšŒì›ê´€ë¦¬</div></div>
            </div>
        </div>
    </div>
    
    <script>
        let draggedElement = null;
        let teamCount = 2;
        const teamColors = ['#F59E0B', '#8B5CF6', '#EC4899', '#14B8A6'];
        
        // ë“œë˜ê·¸ ì‹œì‘
        document.addEventListener('dragstart', (e) => {
            if (e.target.classList.contains('member-circle')) {
                draggedElement = e.target;
                e.target.style.opacity = '0.5';
            }
        });
        
        document.addEventListener('dragend', (e) => {
            if (e.target.classList.contains('member-circle')) {
                e.target.style.opacity = '1';
            }
        });
        
        // ë“œë¡­ ì˜ì—­ ì„¤ì •
        document.querySelectorAll('.team-members').forEach(area => {
            area.addEventListener('dragover', (e) => {
                e.preventDefault();
                area.style.background = '#F3F4F6';
            });
            
            area.addEventListener('dragleave', () => {
                area.style.background = '';
            });
            
            area.addEventListener('drop', (e) => {
                e.preventDefault();
                area.style.background = '';
                
                if (draggedElement) {
                    const teamId = area.dataset.teamMembers;
                    addMemberToTeam(draggedElement, teamId);
                }
            });
        });
        
        function addMemberToTeam(memberElement, teamId) {
            const memberId = memberElement.dataset.id;
            const memberName = memberElement.dataset.name;
            const teamArea = document.querySelector(`[data-team-members="${teamId}"]`);
            
            // ê¸°ì¡´ empty ë©”ì‹œì§€ ì œê±°
            const empty = teamArea.querySelector('.empty-team');
            if (empty) empty.remove();
            
            // íšŒì› ì¶”ê°€
            const memberDiv = document.createElement('div');
            memberDiv.className = 'team-member';
            memberDiv.innerHTML = `
                <div class="member-circle">
                    <div class="circle" style="width: 50px; height: 50px;">
                        <div class="circle-text" style="font-size: 11px;">${memberName}</div>
                    </div>
                </div>
                <div class="remove-btn" onclick="removeMember(this)">âœ•</div>
            `;
            teamArea.insertBefore(memberDiv, teamArea.querySelector('.quick-assign'));
            
            // ëŒ€ê¸°ì—ì„œ ì œê±°
            memberElement.remove();
            updateCounts();
        }
        
        function removeMember(btn) {
            const member = btn.parentElement;
            const memberName = member.querySelector('.circle-text').textContent;
            member.remove();
            
            // ëŒ€ê¸°ë¡œ ë³µê·€
            const waiting = document.getElementById('waitingMembers');
            const newMember = document.createElement('div');
            newMember.className = 'member-circle';
            newMember.draggable = true;
            newMember.dataset.id = Date.now();
            newMember.dataset.name = memberName;
            newMember.innerHTML = `
                <div class="circle"><div class="circle-text">${memberName}</div></div>
            `;
            waiting.appendChild(newMember);
            updateCounts();
        }
        
        function updateCounts() {
            document.querySelectorAll('.team-card').forEach(card => {
                const members = card.querySelectorAll('.team-member').length;
                card.querySelector('.team-member-count').textContent = members;
            });
            
            const waitingCount = document.querySelectorAll('#waitingMembers .member-circle').length;
            document.getElementById('waitingCount').textContent = waitingCount;
        }
        
        function addTeam() {
            const letter = String.fromCharCode(65 + teamCount);
            const color = teamColors[teamCount % teamColors.length];
            teamCount++;
            
            const container = document.getElementById('teamsContainer');
            const newTeam = document.createElement('div');
            newTeam.className = 'team-card';
            newTeam.style.borderLeftColor = color;
            newTeam.innerHTML = `
                <div class="team-header" style="background: ${color};">
                    <div class="team-name">${letter}íŒ€</div>
                    <div class="team-count"><span class="team-member-count">0</span>ëª…</div>
                </div>
                <div class="team-members" data-team-members="team${letter}">
                    <div class="empty-team">íšŒì›ì„ ë“œë˜ê·¸í•˜ì—¬ ë°°ì¹˜í•˜ì„¸ìš”</div>
                </div>
            `;
            container.appendChild(newTeam);
            
            // ë“œë¡­ ì´ë²¤íŠ¸ ì¬ë“±ë¡
            const area = newTeam.querySelector('.team-members');
            area.addEventListener('dragover', (e) => {
                e.preventDefault();
                area.style.background = '#F3F4F6';
            });
            area.addEventListener('dragleave', () => area.style.background = '');
            area.addEventListener('drop', (e) => {
                e.preventDefault();
                area.style.background = '';
                if (draggedElement) {
                    addMemberToTeam(draggedElement, area.dataset.teamMembers);
                }
            });
            
            // íŒ€ ì¶”ê°€ ì™„ë£Œ
        }
        
        function randomAssign() {
            const waiting = Array.from(document.querySelectorAll('#waitingMembers .member-circle'));
            const teams = Array.from(document.querySelectorAll('.team-members'));
            
            waiting.forEach((member, index) => {
                const teamIndex = index % teams.length;
                addMemberToTeam(member, teams[teamIndex].dataset.teamMembers);
            });
            
            // ëœë¤ ë°°ì • ì™„ë£Œ
        }
        
        function goToMatchResult() {
            // í˜„ì¬ íŒ€ êµ¬ì„± ë°ì´í„°ë¥¼ ì €ì¥
            const teamAMembers = Array.from(document.querySelectorAll('[data-team-members="teamA"] .team-member'))
                .map(el => el.querySelector('.circle-text').textContent);
            const teamBMembers = Array.from(document.querySelectorAll('[data-team-members="teamB"] .team-member'))
                .map(el => el.querySelector('.circle-text').textContent);
            
            const teamData = {
                teamA: teamAMembers,
                teamB: teamBMembers,
                timestamp: new Date().getTime()
            };
            
            // localStorageì— ì €ì¥
            localStorage.setItem('currentTeamData', JSON.stringify(teamData));
            
            // ê²½ê¸° ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™
            window.location.href = 'match-result.html';
        }
        
        function resetTeams() {
            if (confirm('ëª¨ë“  íŒ€ ë°°ì •ì„ ì´ˆê¸°í™”í•˜ê³  ì²˜ìŒë¶€í„° ë‹¤ì‹œ êµ¬ì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                // ëª¨ë“  íŒ€ì—ì„œ íšŒì› ì œê±°
                document.querySelectorAll('.team-members .team-member').forEach(member => {
                    member.remove();
                });
                
                // ëŒ€ê¸° ì˜ì—­ì— ëª¨ë“  íšŒì› ì¶”ê°€ (ì˜ˆì‹œ)
                const waiting = document.getElementById('waitingMembers');
                const sampleMembers = ['ê°•ë¯¼ìˆ˜', 'ê¹€ì² ìˆ˜', 'ë°•ì˜í¬', 'ì´ë¯¼ì¤€', 'ì •ìˆ˜ì•„'];
                
                // ê¸°ì¡´ ëŒ€ê¸° íšŒì› ì œê±°
                waiting.innerHTML = '';
                
                // ëª¨ë“  íšŒì›ì„ ëŒ€ê¸°ë¡œ ì¶”ê°€
                sampleMembers.forEach((name, idx) => {
                    const newMember = document.createElement('div');
                    newMember.className = 'member-circle';
                    newMember.draggable = true;
                    newMember.dataset.id = idx + 1;
                    newMember.dataset.name = name;
                    newMember.innerHTML = `
                        <div class="circle"><div class="circle-text">${name}</div></div>
                    `;
                    waiting.appendChild(newMember);
                });
                
                updateCounts();
                alert('âœ… íŒ€ êµ¬ì„±ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        }
    </script>
</body>
</html>

